# Web API Service for PostgreSQL + Filesystem Dump

Flask-приложение, реализующее Web API для записи и чтения сущностей в базу данных PostgreSQL. Каждую минуту приложение агрегирует полученные записи и сохраняет их в `.json` файлы в локальную файловую систему.

## Стек

- Python 3.10+
- Flask
- SQLAlchemy
- PostgreSQL
- JSON

## Функциональность

- POST /write — создаёт новую сущность (name, description) и сохраняет её в PostgreSQL
- GET /read?id=... — извлекает сущность по ID из PostgreSQL
- Каждую минуту агрегируются все новые записи и сохраняются в файл формата JSON в текущую директорию

## Пример сохранённого файла

Файл создаётся в формате `entities_<timestamp>.json` и содержит список сущностей:

```json
[
  {
    "id": 1,
    "name": "Alice",
    "description": "Test entity"
  },
  {
    "id": 2,
    "name": "Bob",
    "description": "Another test"
  }
]
```


## Примечания

- Приложение использует SQLAlchemy и SQLite/PostgreSQL в зависимости от настройки строки подключения
- Поток выгрузки данных в файл запускается параллельно при старте приложения
- Выгрузка происходит независимо от количества записей: каждую минуту создаётся новый файл, если есть новые данные

## Контекст

Этот модуль является частью лабораторной работы, моделирующей распределённую платформу для обработки и передачи данных. Web API служит точкой входа, принимающей сущности и сохраняющей их в транзакционное хранилище с периодическим экспортом в файловую систему. В дальнейших этапах данные обрабатываются с помощью Spark Streaming и пересылаются через Kafka в Apache Cassandra.
